function isCanvasSupported(){var elem=document.createElement('canvas');return!!(elem.getContext&&elem.getContext('2d'))}
function canvasMergeImages(files,width,height,completed){var canvas=document.createElement('canvas');canvas.width=width;canvas.height=height;var ctx=canvas.getContext("2d"),x=0;for(var i in files){var image=files[i];if(typeof image.src=="undefined")continue;ctx.drawImage(image,x,0,image.width,image.height);x+=image.width};var output=canvas.toDataURL("image/jpeg",1);completed(output)};var nodiac={'á':'a','č':'c','ď':'d','é':'e','ě':'e','í':'i','ň':'n','ó':'o','ř':'r','š':'s','ť':'t','ú':'u','ů':'u','ý':'y','ž':'z','ä':'a','ĺ':'l','ľ':'l','ô':'o','ŕ':'r','ö':'o','ü':'u','ß':'ss','ą':'a','ę':'e','ł':'l','ć':'c','ś':'s','ź':'z','ż':'z','ń':'n','Б':'b','в':'v','г':'g','д':'d','ё':'e','ж':'z','з':'z','и':'i','й':'i','к':'k','л':'l','м':'m','н':'n','п':'p','р':'r','с':'s','т':'t','у':'y','ф':'f','х':'x','ц':'o','ч':'ts','ш':'sh','щ':'sht','ъ':'','ы':'y','ь':'i','э':'je','ю':'ju','я':'ja','б':'d'}
function trim_diacritics(s){s=s.toLowerCase();var s2='';for(var i=0;i<s.length;i++)s2+=(typeof nodiac[s.charAt(i)]!='undefined'?nodiac[s.charAt(i)]:s.charAt(i));return s2.replace(/[^a-z0-9_]+/g,'-').replace(/^-|-$/g,'')};var Url={encode:function(string){if(!string)return"";return escape(this._utf8_encode(string)).replace("+","%2B")},decode:function(string){return this._utf8_decode(unescape(string))},_utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128)}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128)}};return utftext},_utf8_decode:function(utftext){var string="",i=0,c=c1=c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++}else if((c>191)&&(c<224)){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode(((c&31)<<6)|(c2&63));i+=2}else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));i+=3}};return string}},fonts=[{name:"Recycle font",url:"recycle",author:'<a href="http://www.vaclav-mach.cz/">Václav Mach</a>',color:'light'},{name:"Bike type",url:"bike",author:'Michal Fojt, Lenka Horáková, <a href="http://mkj.is">Matěj Kašpar Jirásek</a>',color:'dark'},{name:"Duck type",url:"duck",author:'Michal Fojt, Lenka Horáková, <a href="http://mkj.is">Matěj Kašpar Jirásek</a>',color:'dark'},{name:"Králíky square",url:"square",author:'Tomáš Kácel',color:'dark'},{name:"Klam font",url:"klam",author:'Petr Vacek',color:'dark'},{name:"It Socks",url:"it-socks",author:'Gabriel Ádám',color:'light'},{name:"Walk This Way",url:"walk-this-way",author:'Gabriel Ádám',color:'dark'},{name:"Mouka Type",url:"mouka",author:'Jana Ludvíková',color:'light'},{name:"Káva Type",url:"kava",author:'Martina Marešová',color:'dark'},{name:"Maru Type",url:"maru",author:'Marie Lukášová',color:'dark'},{name:"Alergie Font",url:"alergie",author:'Richard Záň',color:'light'},{name:"Strawberdose Font",url:"strawberdose",author:'Patrik Slamka, Martin Havlíček',color:'light'},{name:"Towel Type",url:"towel",author:'Jakub Špiřík, Martina Krasnayová',color:'light'},{name:"Huge Font",url:"huge",author:'Jiří Gerat',color:'dark'},{name:"Mark Me Font",url:"mark-me",author:'Andrea Mužíková',color:'dark'},{name:"Money Font",url:"money",author:'Ema Šturalová',color:'light'},{name:"Alone Type",url:"alone",author:'Tomáš Kácel',color:'light'},{name:"NE Font",url:"ne",author:'Dominika Baníková, Jiří Gerat, Anna Kiliánová, Henrik Lauko',color:'dark'},{name:"Lampa Type",url:"lampa",author:'Jiří Starý',color:'dark'},{name:"Potatype",url:"potatype",author:'Kryštof Zvolánek',color:'dark'},{name:"Eat It",url:"eat-it",author:'Martina Krasnayová, Jakub Špiřík, Gabriela Véghová',color:'light'},{name:"Bodytype",url:"bodytype",author:'Gabriela Véghová',color:'light'}],currentText=""
function shuffle(o){for(var j,x,i=o.length;i;j=Math.floor(Math.random()*i),x=o[--i],o[i]=o[j],o[j]=x);return o}
function preload(font){var first="A",last="Z";for(var i=first.charCodeAt(0);i<=last.charCodeAt(0);i++){var image=new Image();image.src=font+'/'+String.fromCharCode(i)+'.jpg'}}
function onSubmit(){var text=document.getElementById("message").value;text=trim_diacritics(text);text=text.toUpperCase();var container=document.getElementById("letters"),skip=0;for(var i=0;i<currentText.length;i++)if(currentText[i]!=text[i])skip=i;if(skip<=currentText.length||text.length<currentText){container.innerHTML='';skip=0};for(var i=0;i<text.length;i++){if(i<skip)continue;var character=text.charAt(i),regexp=/[a-zA-Z ]/;if(!regexp.test(character))continue;switch(character){case' ':character='SPACE';break};var src=font.url+'/'+character+'.jpg',image=new Image();image.src=src;image.onload=function(){resizeImages();resize()};container.appendChild(image)};resizeImages();resize();currentText=text;setHash()}
function resize(){var container=document.getElementById("letters"),w=0;for(var i=0;i<container.childNodes.length;i++){var node=container.childNodes[i];w+=node.offsetWidth};container.style.width=w+"px"}
function metadata(){document.title=font.name;var author=document.getElementById('author');author.innerHTML=font.author;var body=document.getElementById('body');body.setAttribute('class',font.color)}
function onSelect(node){font=fonts[node.value];onSubmit();metadata();document.getElementById("message").focus();preload(font.url)};fonts=shuffle(fonts);var font=fonts[0];if(window.location.hash=="")preload(font.url);window.onload=function(){var select=document.getElementById('font');select.innerHTML="<option>Choose your font...</option>";for(var i in fonts){var option='<option value="'+i+'">'+fonts[i].name+'</option>';select.innerHTML+=option};document.getElementById("message").setAttribute("placeholder","WRITE SOMETHING!");updateFromHash();onSubmit();metadata();resizeImages();resize();window.onresize=resizeImages;document.getElementById("message").removeAttribute("disabled");document.getElementById("font").removeAttribute("disabled");document.getElementById("download_button").innerHTML="Download as JPEG";for(var i in fonts){var f=fonts[i];if(f.url==font.url){select.value=i;break}}};var resizeImages=function(){var images=document.getElementsByTagName("img"),height=document.documentElement.clientHeight;for(var i=0;i<images.length;i++){var image=images[i],ratio=image.width/image.height;if(isNaN(ratio)){image.style.opacity="0";document.body.style.cursor="wait";continue};image.style.opacity="1";document.body.style.cursor="auto";var width=height*ratio;image.style.height=height+"px";image.style.width=width+"px"}}
function setHash(){var text=document.getElementById("message").value;if(!text)return;window.location.hash=font.url+"/"+Url.encode(text);ga('send','show',font.url,text,{page:'/'+window.location.hash})}
function updateFromHash(){if(window.location.hash=="")return;var parts=window.location.hash.split("/",2);if(!(parts[0]&&parts[1]))return;var f=parts[0],t=parts[1];f=f.substr(1,f.length-1);document.getElementById("message").value=Url.decode(t);var found=findFontByUrl(f);if(found){font=found;preload(font.url)}}
function findFontByUrl(url){for(var i in fonts)if(fonts[i].url==url)return fonts[i];return false}
function downloadText(){if(!isCanvasSupported()){alert("Downloading not supported. Update to modern browser with CANVAS support.");return};var m=document.getElementById("message").value,letters=document.getElementById("letters"),images=document.getElementById("letters").childNodes;canvasMergeImages(images,letters.offsetWidth-10,letters.offsetHeight-5,function(jpeg){document.getElementById("download_button").setAttribute("href",jpeg);document.getElementById("download_button").setAttribute("download",m+".jpg")})}
function openSelect(id){var element=document.getElementById(id);if(document.createEvent){var e=document.createEvent("MouseEvents");e.initMouseEvent("mousedown",true,true,window,0,0,0,0,0,false,false,false,false,0,null);element.dispatchEvent(e)}else if(element.fireEvent)element.fireEvent("onmousedown")}