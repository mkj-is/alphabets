function isCanvasSupported(){var e=document.createElement("canvas");return!!(e.getContext&&e.getContext("2d"))}function canvasMergeImages(e,t,n,r){var i=document.createElement("canvas");i.width=t;i.height=n;var s=i.getContext("2d");var o=0;for(var u in e){var a=e[u];if(typeof a.src=="undefined")continue;s.drawImage(a,o,0,a.width,a.height);o+=a.width}var f=i.toDataURL("image/jpeg",1);r(f)}function trim_diacritics(e){e=e.toLowerCase();var t="";for(var n=0;n<e.length;n++){t+=typeof nodiac[e.charAt(n)]!="undefined"?nodiac[e.charAt(n)]:e.charAt(n)}return t.replace(/[^a-z0-9_]+/g,"-").replace(/^-|-$/g,"")}function shuffle(e){for(var t,n,r=e.length;r;t=Math.floor(Math.random()*r),n=e[--r],e[r]=e[t],e[t]=n);return e}function preload(e){var t="A",n="Z";for(var r=t.charCodeAt(0);r<=n.charCodeAt(0);r++){var i=new Image;i.src=e+"/"+String.fromCharCode(r)+".jpg"}}function onSubmit(){var e=document.getElementById("message").value;e=trim_diacritics(e);e=e.toUpperCase();var t=document.getElementById("letters");var n=0;for(var r=0;r<currentText.length;r++){if(currentText[r]!=e[r]){n=r}}if(n<=currentText.length||e.length<currentText){t.innerHTML="";n=0}for(var r=0;r<e.length;r++){if(r<n)continue;var i=e.charAt(r);var s=/[a-zA-Z ]/;if(!s.test(i)){continue}switch(i){case" ":i="SPACE";break}var o=font.url+"/"+i+".jpg";var u=new Image;u.src=o;u.onload=function(){resizeImages();resize()};t.appendChild(u)}resizeImages();resize();currentText=e;setHash()}function resize(){var e=document.getElementById("letters");var t=0;for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];t+=r.offsetWidth}e.style.width=t+"px"}function metadata(){document.title=font.name;var e=document.getElementById("author");e.innerHTML=font.author;var t=document.getElementById("body");t.setAttribute("class",font.color)}function onSelect(e){font=fonts[e.value];onSubmit();metadata();document.getElementById("message").focus();preload(font.url)}function setHash(){var e=document.getElementById("message").value;if(!e)return;window.location.hash=font.url+"/"+Url.encode(e);ga("send","show",font.url,e,{page:"/"+window.location.hash})}function updateFromHash(){if(window.location.hash=="")return;var e=window.location.hash.split("/",2);if(!(e[0]&&e[1]))return;var t=e[0];var n=e[1];t=t.substr(1,t.length-1);document.getElementById("message").value=Url.decode(n);var r=findFontByUrl(t);if(r){font=r;preload(font.url)}}function findFontByUrl(e){for(var t in fonts){if(fonts[t].url==e){return fonts[t]}}return false}function downloadText(){if(!isCanvasSupported()){alert("Downloading not supported. Update to modern browser with CANVAS support.");return}var e=document.getElementById("message").value;var t=document.getElementById("letters");var n=document.getElementById("letters").childNodes;canvasMergeImages(n,t.offsetWidth-10,t.offsetHeight-5,function(t){document.getElementById("download_button").setAttribute("href",t);document.getElementById("download_button").setAttribute("download",e+".jpg")})}function openSelect(e){var t=document.getElementById(e);if(document.createEvent){var n=document.createEvent("MouseEvents");n.initMouseEvent("mousedown",true,true,window,0,0,0,0,0,false,false,false,false,0,null);t.dispatchEvent(n)}else if(t.fireEvent){t.fireEvent("onmousedown")}}var nodiac={"á":"a","č":"c","ď":"d","é":"e","ě":"e","í":"i","ň":"n","ó":"o","ř":"r","š":"s","ť":"t","ú":"u","ů":"u","ý":"y","ž":"z","ä":"a","ĺ":"l","ľ":"l","ô":"o","ŕ":"r","ö":"o","ü":"u","ß":"ss","ą":"a","ę":"e","ł":"l","ć":"c","ś":"s","ź":"z","ż":"z","ń":"n","Б":"b","в":"v","г":"g","д":"d","ё":"e","ж":"z","з":"z","и":"i","й":"i","к":"k","л":"l","м":"m","н":"n","п":"p","р":"r","с":"s","т":"t","у":"y","ф":"f","х":"x","ц":"o","ч":"ts","ш":"sh","щ":"sht","ъ":"","ы":"y","ь":"i","э":"je","ю":"ju","я":"ja","б":"d"};var Url={encode:function(e){if(!e){return""}return escape(this._utf8_encode(e)).replace("+","%2B")},decode:function(e){return this._utf8_decode(unescape(e))},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t="";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}};var fonts=[{name:"Recycle font",url:"recycle",author:'<a href="http://www.vaclav-mach.cz/">Václav Mach</a>',color:"light"},{name:"Bike type",url:"bike",author:'Michal Fojt, Lenka Horáková, <a href="http://mkj.is">Matěj Kašpar Jirásek</a>',color:"dark"},{name:"Duck type",url:"duck",author:'Michal Fojt, Lenka Horáková, <a href="http://mkj.is">Matěj Kašpar Jirásek</a>',color:"dark"},{name:"Králíky square",url:"square",author:"Tomáš Kácel",color:"dark"},{name:"Klam font",url:"klam",author:"Petr Vacek",color:"dark"},{name:"It Socks",url:"it-socks",author:"Gabriel Ádám",color:"light"},{name:"Walk This Way",url:"walk-this-way",author:"Gabriel Ádám",color:"dark"},{name:"Mouka Type",url:"mouka",author:"Jana Ludvíková",color:"light"},{name:"Káva Type",url:"kava",author:"Martina Marešová",color:"dark"},{name:"Maru Type",url:"maru",author:"Marie Lukášová",color:"dark"},{name:"Alergie Font",url:"alergie",author:"Richard Záň",color:"light"},{name:"Strawberdose Font",url:"strawberdose",author:"Patrik Slamka, Martin Havlíček",color:"light"},{name:"Towel Type",url:"towel",author:"Jakub Špiřík, Martina Krasnayová",color:"light"},{name:"Huge Font",url:"huge",author:"Jiří Gerat",color:"dark"},{name:"Mark Me Font",url:"mark-me",author:"Andrea Mužíková",color:"dark"},{name:"Money Font",url:"money",author:"Ema Šturalová",color:"light"},{name:"Alone Type",url:"alone",author:"Tomáš Kácel",color:"light"},{name:"NE Font",url:"ne",author:"Dominika Baníková, Jiří Gerat, Anna Kiliánová, Henrik Lauko",color:"dark"},{name:"Lampa Type",url:"lampa",author:"Jiří Starý",color:"dark"},{name:"Eat It",url:"eat-it",author:"Martina Krasnayová, Jakub Špiřík, Gabriela Véghová",color:"light"}];var currentText="";fonts=shuffle(fonts);var font=fonts[0];if(window.location.hash==""){preload(font.url)}window.onload=function(){var e=document.getElementById("font");e.innerHTML="<option>Choose your font...</option>";for(var t in fonts){var n='<option value="'+t+'">'+fonts[t].name+"</option>";e.innerHTML+=n}document.getElementById("message").setAttribute("placeholder","WRITE SOMETHING!");updateFromHash();onSubmit();metadata();resizeImages();resize();window.onresize=resizeImages;document.getElementById("message").removeAttribute("disabled");document.getElementById("font").removeAttribute("disabled");document.getElementById("download_button").innerHTML="Download as JPEG";for(var t in fonts){var r=fonts[t];if(r.url==font.url){e.value=t;break}}};var resizeImages=function(){var e=document.getElementsByTagName("img");var t=document.documentElement.clientHeight;for(var n=0;n<e.length;n++){var r=e[n];var i=r.width/r.height;if(isNaN(i)){r.style.opacity="0";document.body.style.cursor="wait";continue}r.style.opacity="1";document.body.style.cursor="auto";var s=t*i;r.style.height=t+"px";r.style.width=s+"px"}}